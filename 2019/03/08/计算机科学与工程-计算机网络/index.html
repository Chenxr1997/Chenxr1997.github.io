<!DOCTYPE html>



  


<html class="theme-next mist use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT">










<meta name="description" content="[TOC] https://hit-alibaba.github.io/interview/basic/network/HTTP.html 物理层。波分复用、频分复用等 数据链路层。以太网及MAC等。 网络层。IP、BGP、OSPF、RIP。包括数据报文格式等。 TCP UDP区别 在实际中的应用：TCP要经过三次握手，消耗的资源会比较多，通常只有当我们确保能够传输到的时候才会用到TCP协议，比如">
<meta property="og:type" content="article">
<meta property="og:title" content="计算机科学与工程-计算机网络">
<meta property="og:url" content="http://yoursite.com/2019/03/08/计算机科学与工程-计算机网络/index.html">
<meta property="og:site_name" content="Chenxr&#39;s blogs">
<meta property="og:description" content="[TOC] https://hit-alibaba.github.io/interview/basic/network/HTTP.html 物理层。波分复用、频分复用等 数据链路层。以太网及MAC等。 网络层。IP、BGP、OSPF、RIP。包括数据报文格式等。 TCP UDP区别 在实际中的应用：TCP要经过三次握手，消耗的资源会比较多，通常只有当我们确保能够传输到的时候才会用到TCP协议，比如">
<meta property="og:locale" content="zh-Hans">
<meta property="og:image" content="http://yoursite.com/2019/03/08/计算机科学与工程-计算机网络/1.png">
<meta property="og:updated_time" content="2019-08-18T09:07:40.034Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="计算机科学与工程-计算机网络">
<meta name="twitter:description" content="[TOC] https://hit-alibaba.github.io/interview/basic/network/HTTP.html 物理层。波分复用、频分复用等 数据链路层。以太网及MAC等。 网络层。IP、BGP、OSPF、RIP。包括数据报文格式等。 TCP UDP区别 在实际中的应用：TCP要经过三次握手，消耗的资源会比较多，通常只有当我们确保能够传输到的时候才会用到TCP协议，比如">
<meta name="twitter:image" content="http://yoursite.com/2019/03/08/计算机科学与工程-计算机网络/1.png">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/2019/03/08/计算机科学与工程-计算机网络/">





  <title>计算机科学与工程-计算机网络 | Chenxr's blogs</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Chenxr's blogs</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/03/08/计算机科学与工程-计算机网络/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Chenxr">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Chenxr's blogs">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">计算机科学与工程-计算机网络</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-03-08T22:40:01+08:00">
                2019-03-08
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>[TOC]</p>
<p><a href="https://hit-alibaba.github.io/interview/basic/network/HTTP.html" target="_blank" rel="noopener">https://hit-alibaba.github.io/interview/basic/network/HTTP.html</a></p>
<p>物理层。波分复用、频分复用等</p>
<p>数据链路层。以太网及MAC等。</p>
<p>网络层。IP、BGP、OSPF、RIP。包括数据报文格式等。</p>
<p>TCP UDP区别</p>
<p>在实际中的应用：TCP要经过三次握手，消耗的资源会比较多，通常只有当我们确保能够传输到的时候才会用到TCP协议，比如说收发邮件。而UDP就比较方便，消耗的资源也比较少，但是不可靠，可能出现丢包，平时看视频聊天什么的用UDP协议，因为丢个一辆帧不会有太大影响。端口</p>
<p>链路层网络层传输层的作用</p>
<p>http协议，https</p>
<p>HTTP的特性</p>
<p>：HTTP构建于TCP/IP协议之上，默认端口号为80</p>
<p>HTTP是无连接状态的</p>
<p>http和https的区别</p>
<p>HTTPS和HTTP的区别主要如下：</p>
<p>1、https协议需要到ca申请证书，一般免费证书较少，因而需要一定费用。</p>
<p>2、http是超文本传输协议，信息是明文传输，https则是具有安全性的ssl加密传输协议。</p>
<p>3、http和https使用的是完全不同的连接方式，用的端口也不一样，前者是80，后者是443。</p>
<p>HTTPS的优点</p>
<p>1、SEO方面</p>
<p>谷歌曾在2014年8月份调整搜索引擎算法，并称“比起同等HTTP网站，采用HTTPS加密的网站在搜索结果中的排名将会更高”。</p>
<p>2、安全性</p>
<p>尽管HTTPS并非绝对安全，掌握根证书的机构、掌握加密算法的组织同样可以进行中间人形式的攻击，但HTTPS仍是现行架构下最安全的解决方案，主要有以下几个好处：</p>
<p>（1）、使用HTTPS协议可认证用户和服务器，确保数据发送到正确的客户机和服务器；</p>
<p>（2）、HTTPS协议是由SSL+HTTP协议构建的可进行加密传输、身份认证的网络协议，要比http协议安全，可防止数据在传输过程中不被窃取、改变，确保数据的完整性。</p>
<p>（3）、HTTPS是现行架构下最安全的解决方案，虽然不是绝对安全，但它大幅增加了中间人攻击的成本。</p>
<p>HTTPS的缺点</p>
<p>虽然说HTTPS有很大的优势，但其相对来说，还是有些不足之处的，具体来说，有以下2点：</p>
<p>1、SEO方面</p>
<p>据ACM CoNEXT数据显示，使用HTTPS协议会使页面的加载时间延长近50%，增加10%到20%的耗电，此外，HTTPS协议还会影响缓存，增加数据开销和功耗，甚至已有安全措施也会受到影响也会因此而受到影响。</p>
<p>而且HTTPS协议的加密范围也比较有限，在黑客攻击、拒绝服务攻击、服务器劫持等方面几乎起不到什么作用。</p>
<p>最关键的，SSL证书的信用链体系并不安全，特别是在某些国家可以控制CA根证书的情况下，中间人攻击一样可行。</p>
<p>2、经济方面</p>
<p>（1）、SSL证书需要钱，功能越强大的证书费用越高，个人网站、小网站没有必要一般不会用。</p>
<p>（2）、SSL证书通常需要绑定IP，不能在同一IP上绑定多个域名，IPv4资源不可能支撑这个消耗（SSL有扩展可以部分解决这个问题，但是比较麻烦，而且要求浏览器、操作系统支持，Windows XP就不支持这个扩展，考虑到XP的装机量，这个特性几乎没用）。</p>
<p>（3）、HTTPS连接缓存不如HTTP高效，大流量网站如非必要也不会采用，流量成本太高。</p>
<p>（4）、HTTPS连接服务器端资源占用高很多，支持访客稍多的网站需要投入更大的成本，如果全部采用HTTPS，基于大部分计算资源闲置的假设的VPS的平均成本会上去。</p>
<p>（5）、HTTPS协议握手阶段比较费时，对网站的相应速度有负面影响，如非必要，没有理由牺牲用户体验。</p>
<p>HTTP报文</p>
<p>HTTP是一个基于TCP/IP通信协议来传递数据（HTML 文件, 图片文件, 查询结果等）。</p>
<p>请求报文：HTTP协议是以ASCII码传输，建立在TCP/IP协议之上的应用层规范。规范把HTTP请求分为三个部分：状态行、请求头、消息主体</p>
<p>一个URL地址，它用于描述一个网络上的资源，而 HTTP 中的GET，POST，PUT，DELETE就对应着对这个资源的查，增，改，删4个操作。</p>
<p><method> <request-url> <version><br>
<headers></headers></version></request-url></method></p>
<entity-body>
GET：信息获取，安全的（不修改，不产生副作用）、幂等的（对同一个URL的多个请求应该返回同样的结果）
<p>GET /books/?sex=man&amp;name=Professional HTTP/1.1<br>
Host: <a href="http://www.example.com" target="_blank" rel="noopener">www.example.com</a><br>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7.6)<br>
Gecko/20050225 Firefox/1.0.1<br>
Connection: Keep-Alive<br>
POST表示可能修改服务器上的资源的请求</p>
<p>POST / HTTP/1.1<br>
Host: <a href="http://www.example.com" target="_blank" rel="noopener">www.example.com</a><br>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7.6)<br>
Gecko/20050225 Firefox/1.0.1<br>
Content-Type: application/x-www-form-urlencoded<br>
Content-Length: 40<br>
Connection: Keep-Alive</p>
<p>sex=man&amp;name=Professional<br>
GET提交的数据收到URL长度的限制，HTTP协议规范设有对URL长度进行限制。这个限制是特定的浏览器及服务器对于它的限制</p>
<p>POST是没有大小限制的，HTTP协议规范也没有进行大小限制。但是出于安全考虑，服务器软件实现的时候会做一定的限制</p>
<p>GET和POST的数据是一样的，知识位置不同，一个在URL里面，一个在HTTP包的包体里</p>
<p>POST提交的数据必须在body部分中，但是协议中没有规定数据使用哪种编码方式或者数据格式。客户端可以自己决定消息主题的格式。但是服务端一般根据请求头中的Content-Type字段来获知请求中的消息是用什么编码方式</p>
<p>application/x-www-form-urlencoded<br>
最常见的POST数据提交方式，浏览器原生的<form>表单。如果不设置enctype属性，最终就会以application/x-www-form-urlencoded 方式提交数据。<br>
multipart/form-data<br>
我们使用表单上传文件时，必须让 <form> 表单的 enctype 等于 multipart/form-data<br>
首先生成了一个 boundary 用于分割不同的字段，为了避免与正文内容重复，boundary 很长很复杂。<br>
Content-Type 里指明了数据是以 multipart/form-data 来编码<br>
每部分都是以 --boundary 开始，紧接着是内容描述信息，然后是回车，最后是字段具体内容（文本或二进制）<br>
如果传输的是文件，还要包含文件名和文件类型信息。<br>
application/json，text/xml，乃至 application/x-protobuf 这种二进制格式，只要服务器可以根据 Content-Type和 Content-Encoding 正确地解析出请求，都是没有问题的</form></form></p>
<p>相应报文</p>
<p>状态行</p>
<p>第一行为状态行，（HTTP/1.1）表明HTTP版本为1.1版本，状态码为200，状态消息为（ok）</p>
<p>状态代码：</p>
<p>1xx：指示信息–表示请求已接收，继续处理</p>
<p>2xx：成功–表示请求已被成功接收、理解、接受</p>
<p>3xx：重定向–要完成请求必须进行更进一步的操作</p>
<p>4xx：客户端错误–请求有语法错误或请求无法实现</p>
<p>5xx：服务器端错误–服务器未能实现合法的请求</p>
<p>消息报头：说明客户端要使用的一些附加信息</p>
<p>Date:生成响应的日期和时间；Content-Type:指定了MIME类型的HTML(text/html),编码类型是UTF-8</p>
<p>空行：消息报头后面的空行是必须的</p>
<p>响应正文：服务器返回给客户端的文本信息</p>
<p>会话跟踪：浏览器与服务器之间的通信是通过HTTP协议进行通信的，而HTTP协议是无状态的协议。不能保存客户的信息，即一次响应完成之后连接就断开了，下一次请求需要重新连接。会话跟踪技术判断两个连接是否是同一个用户。</p>
<p>URL重写：在URL末尾添加一个附加数据，标识该会话，把会话ID通过URL的信息传递过去，以便在服务器端进行识别不同的用户。</p>
<p>隐藏表单域：将会话ID添加到HTML表单元素中</p>
<p>Cookie：保存在客户端，web服务器发送给客户端的一小段信息，客户端读取信息发送到服务器端，进而进行用户识别</p>
<p>保存自客户端内存：临时，浏览器关闭就小时</p>
<p>保存在客户机磁盘上：永久</p>
<p>可以被禁止</p>
<p>Session：保存在服务端，可以保存在集群、数据库、文件中。session唯一标识每一个用户。session实现依赖于cookie，如果cookie禁用，那么session也将失效。</p>
<p>主要特点：</p>
<p>简单快速：仅仅包括请求头、方法和参数</p>
<p>灵活：允许传输任意类型对象，COntent-Type加以标记</p>
<p>无连接：限制每次连接只处理一个请求，处理完客户的请求以并收到客户的应答以后，断开连接。采用这种方式节省传输时间</p>
<p>无状态：无状态，协议对于事务没有记忆能力，这可能导致每次传送数据量增大，但是应答比较快</p>
<p>url：</p>
<p>协议</p>
<p>域名</p>
<p>端口</p>
<p>虚拟目录</p>
<p>文件名</p>
<p>锚部分</p>
<p>参数部分</p>
<p>HTTP工作原理：HTTP协议定义了Web客户端如何从Web服务器请求Web页面，以及服务器如何把Web页面传送给客户端。</p>
<p>HTTP协议采用了请求/响应模型。客户端向服务器发送一个请求报文，请求报文包含请求的方法、URL、协议版本、请求头部和请求数据。服务器以一个状态行作为响应，响应的内容包括协议的版本、成功或者错误代码、服务器信息、响应头部和响应数据。</p>
<p>客户端连接到Web服务器（客户度那通常是浏览器，与Web服务器的HTTP端口建立一个TCP套接字连接）</p>
<p>——&gt;发送HTTP请求（通过TCP套接字，客户端向Web服务器发送个文本的请求报文，由请求行、请求头部、空行和请求数据4部分构成）</p>
<p>——&gt;Web服务器解析请求，定位请求资源，将资源副本写到TCP套接字，由客户端读取。一个响应由状态行，响应头部、空行和响应数据4部分组成。</p>
<p>——&gt;释放TCP连接，如果connection为close模式，服务器主动关闭TCP连接，客户端被动关闭连接，释放请求。</p>
<p>——&gt;客户端解析状态行，查看请求的状态代码，解析每一个响应头，响应头告知以下若干字节的HTML文档和文档的字符集，客户端浏览器读取相应数据HTML，根据HTML的语法对其进行格式化，并在浏览器窗口显示。</p>
<p>浏览器——&gt;DNS解析请求</p>
<p>浏览器——&gt;服务器建立TCP连接</p>
<p>读取请求报文作为TCP三次握手第三个报文数据——&gt;发给服务器</p>
<p>服务器——&gt;客户端（HTML文本）</p>
<p>释放TCP</p>
<p>浏览器显示HTM:</p>
<p>get请求：以?分割URL和传输数据，多个参数用&amp;连接；</p>
<p>英文字母/数字，原样发送</p>
<p>如果是空格，转换为+</p>
<p>如果是中文/其他字符，则直接把字符串用BASE64加密</p>
<p>GET提交的数据会在地址栏中显示出来，而POST提交，地址栏不会改变</p>
<p>大小限制：HTTP协议对传输数据大小，URL长度没有限制</p>
<p>但是GET——&gt;浏览器和服务器对URL长度有限制。</p>
<p>POST理论上不受限制但是服务器会规定数据大小</p>
<p>TCP特性</p>
<p>TCP面向连接、可靠的字节流服务</p>
<p>TCP连接中，仅有两方进行彼此通信，广播和多播不能用于TCP</p>
<p>TCP使用校验和、确认和重传机制保证可靠传输</p>
<p>TCP给数据分节进行排序，并使用累计确认保证数据顺序的不变和非重复</p>
<p>TCP使用滑动窗口机制来实现流量控制，通过改变窗口大小进行拥塞控制</p>
<p>TCP不能保证数据一定会被对方接收，但是它所能提供的数据是可靠递送或者故障的可靠通道</p>
<p>三次握手</p>
<p>建立一个TCP连接时，需要客户端和服务器总共发送三个包</p>
<p>连接服务器指定端口</p>
<p>建立TCP连接</p>
<p>同步连接双方的序列号和确认好</p>
<p>交换TCP窗口大小</p>
<p>第一次握手：SYN=1，seq=x：</p>
<p>客户端发送一个TCP的SYN标志位置1的包，指明客户端打算连接的服务器的端口</p>
<p>初始序号x保存在包头的序列号字段里</p>
<p>发送完毕后面，客户端进入SYN_SENT状态</p>
<p>第二次握手：(SYN=1, ACK=1, seq=y, ACKnum=x+1)</p>
<p>服务器发回确认包（ACK）应答</p>
<p>选择自己的ISN序号，放到Seq域里</p>
<p>确认序号设置为客户端ISN序号加1：X+1</p>
<p>服务端进入SYN_RCVD</p>
<p>第三次握手：(ACK=1，ACKnum=y+1)</p>
<p>客户端再次发送确认包ACK</p>
<p>SYN标志位为0</p>
<p>ACK标志位为1</p>
<p>确定字段为服务器发来ACK的序号字段+1</p>
<p>发送完毕后，客户端进入 ESTABLISHED 状态，当服务器端接收到这个包时，也进入 ESTABLISHED 状态，TCP 握手结束。</p>
<p>四次挥手</p>
<p>第一次挥手(FIN=1，seq=x)</p>
<p>假设客户端想要关闭连接，客户端发送一个 FIN 标志位置为1的包，表示自己已经没有数据可以发送了，但是仍然可以接受数据。</p>
<p>发送完毕后，客户端进入 FIN_WAIT_1 状态。</p>
<p>第二次挥手(ACK=1，ACKnum=x+1)</p>
<p>服务器端确认客户端的 FIN 包，发送一个确认包，表明自己接受到了客户端关闭连接的请求，但还没有准备好关闭连接。</p>
<p>发送完毕后，服务器端进入 CLOSE_WAIT 状态，客户端接收到这个确认包之后，进入 FIN_WAIT_2状态，等待服务器端关闭连接。</p>
<p>第三次挥手(FIN=1，seq=y)</p>
<p>服务器端准备好关闭连接时，向客户端发送结束连接请求，FIN 置为1。</p>
<p>发送完毕后，服务器端进入 LAST_ACK 状态，等待来自客户端的最后一个ACK。</p>
<p>第四次挥手(ACK=1，ACKnum=y+1)</p>
<p>客户端接收到来自服务器端的关闭请求，发送一个确认包，并进入 TIME_WAIT状态，等待可能出现的要求重传的 ACK 包。</p>
<p>服务器端接收到这个确认包之后，关闭连接，进入 CLOSED 状态。</p>
<p>客户端等待了某个固定时间（两个最大段生命周期，2MSL，2 Maximum Segment Lifetime）之后，没有收到服务器端的 ACK ，认为服务器端已经正常关闭连接，于是自己也关闭连接，进入 CLOSED 状态</p>
<p>SYN攻击：</p>
<p>SYN 攻击指的是，攻击客户端在短时间内伪造大量不存在的IP地址，向服务器不断地发送SYN包，服务器回复确认包，并等待客户的确认。由于源地址是不存在的，服务器需要不断的重发直至超时，这些伪造的SYN包将长时间占用未连接队列，正常的SYN请求被丢弃，导致目标系统运行缓慢，严重者会引起网络堵塞甚至系统瘫痪。</p>
<p>SYN 攻击是一种典型的 DoS/DDoS 攻击。</p>
<p>如何检测 SYN 攻击？</p>
<p>检测 SYN 攻击非常的方便，当你在服务器上看到大量的半连接状态时，特别是源IP地址是随机的，基本上可以断定这是一次SYN攻击。在 Linux/Unix 上可以使用系统自带的 netstats 命令来检测 SYN 攻击。</p>
<p>如何防御 SYN 攻击？</p>
<p>SYN攻击不能完全被阻止，除非将TCP协议重新设计。我们所做的是尽可能的减轻SYN攻击的危害，常见的防御 SYN 攻击的方法有如下几种：</p>
<p>缩短超时（SYN Timeout）时间</p>
<p>增加最大半连接数</p>
<p>过滤网关防护</p>
<p>SYN cookies技术</p>
<p>TCP 的连接，实际上是一种纯软件层面的概念，在物理层面并没有“连接”这种概念。在长时间无数据交互的时间段内，交互双方都有可能出现掉电、死机、异常重启等各种意外，当这些意外发生之后，这些 TCP 连接并未来得及正常释放，在软件层面上，连接的另一方并不知道对端的情况，它会一直维护这个连接，长时间的积累会导致非常多的半打开连接，造成端系统资源的消耗和浪费，为了解决这个问题，在传输层可以利用 TCP 的 KeepAlive 机制实现来实现。</p>
<p>TCP KeepAlive 的基本原理是，隔一段时间给连接对端发送一个探测包，如果收到对方回应的 ACK，则认为连接还是存活的，在超过一定重试次数之后还是没有收到对方的回应，则丢弃该 TCP 连接。</p>
<p>IP 192.168.1.116.3337 &gt; 192.168.1.123.7788: S 3626544836:3626544836 IP 192.168.1.123.7788 &gt; 192.168.1.116.3337: S 1739326486:1739326486 ack 3626544837 IP 192.168.1.116.3337 &gt; 192.168.1.123.7788: ack 1739326487,ack 1</p>
<p>第一次握手：192.168.1.116发送位码syn＝1,随机产生seq number=3626544836的数据包到192.168.1.123,192.168.1.123由SYN=1知道192.168.1.116要求建立联机;</p>
<p>第二次握手：192.168.1.123收到请求后要确认联机信息，向192.168.1.116发送ack number=3626544837,syn=1,ack=1,随机产生seq=1739326486的包;</p>
<p>第三次握手：192.168.1.116收到后检查ack number是否正确，即第一次发送的seq number+1,以及位码ack是否为1，若正确，192.168.1.116会再发送ack number=1739326487,ack=1，192.168.1.123收到后确认seq=seq+1,ack=1则连接建立成功。</p>
<p>图解： 一个三次握手的过程（图1，图2）</p>
<p>（图1） （图2）</p>
<p>第一次握手的标志位（图3） 我们可以看到标志位里面只有个同步位，也就是在做请求(SYN) （图3） 第二次握手的标志位（图4） 我们可以看到标志位里面有个确认位和同步位，也就是在做应答(SYN + ACK) （图4） 第三次握手的标志位（图5） 我们可以看到标志位里面只有个确认位，也就是再做再次确认(ACK) （图5） 一个完整的三次握手也就是 请求—应答—再次确认</p>
<p>UDP</p>
<p>UDP特性：</p>
<p>缺乏可靠性：UDP本身不提供确认、序列号、超时重传等机制。因此UDP不保证数据报能够到达、不保证数据报的先后顺序、不保证每个数据报只到达一次</p>
<p>UDP数据报是有长度的，每个UDP数据报如果正确到达目的地，数据报的长度会一起传递给接收方，但是TCP是一个字节流协议，没有任何的边界记录</p>
<p>UDP是无连接的。UDP客户和服务器之间不必存在长期的关系，不需要握手创建连接</p>
<p>UDP支持多播和广播</p>
<p>IP协议</p>
<p>IP协议位于TCP/IP协议的第三层——网络层。与传输层协议相比，网络层的责任是提供点到点(hop by hop)服务，而传输层（TCP/UDP）提供端到端的服务</p>
<p>IP地址分类：A、B、C、D</p>
<p>广播：</p>
<p>四种广播地址：</p>
<p>受限广播：255.255.255.255。该地址用于主机配置过程中IP数据报的目的地址，在任何情况下，router不转发目的地址为255.255.255.255的数据报，这样的数据报仅出现在本地网络中。</p>
<p>指向网络的广播：</p>
<h1>应用层</h1>
<p>HTTP，FTP，IMAP/POP3/SMTP，DNS</p>
<p>P2P</p>
<h1>传输层</h1>
<p>TCP，UDP</p>
<h1>网络层</h1>
<p>交换机，路由器，路由表</p>
<p>私有网络，子网</p>
<p>反向代理</p>
<p>NAT网关</p>
<h1>链路层</h1>
<p>LTE，WIFI，蓝牙，IPv4/6，NFV，VLAN，IPQoS</p>
<p>PPP</p>
<p>SDN（OpenFlow）</p>
<p>DHCP</p>
<p>ICMP</p>
<p><img src="/2019/03/08/计算机科学与工程-计算机网络/1.png" alt="img"></p>
<p>协议图<a href="https://blog.csdn.net/china_jeffery/article/details/79195819" target="_blank" rel="noopener">https://blog.csdn.net/china_jeffery/article/details/79195819</a></p>
<p>交换机配置，路由器配置</p>
<p>云api密钥，SSH密钥，安全组，IPsec，SSH，SSL，防火墙</p>
<p>弹性公网IP，多IP服务器</p>
<p>包转发率(PPS)</p>
<p>CDN</p>
<p>管理工具：wireshark</p>
<p>QoS配置，ACL规则</p>
<p>边界网关协议（BGP）</p>
<p>ACL访问控制策略</p>
<p>ISP</p>
</entity-body>
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2019/03/08/计算机科学与工程-操作系统/" rel="next" title="计算机科学与工程-操作系统">
                <i class="fa fa-chevron-left"></i> 计算机科学与工程-操作系统
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2019/03/08/计算机科学与工程-数据库/" rel="prev" title="计算机科学与工程-数据库">
                计算机科学与工程-数据库 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">Chenxr</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">92</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                
                  <span class="site-state-item-count">1</span>
                  <span class="site-state-item-name">分类</span>
                
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                
                  <span class="site-state-item-count">1</span>
                  <span class="site-state-item-name">标签</span>
                
              </div>
            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#undefined"><span class="nav-number">1.</span> <span class="nav-text">应用层</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#undefined"><span class="nav-number">2.</span> <span class="nav-text">传输层</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#undefined"><span class="nav-number">3.</span> <span class="nav-text">网络层</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#undefined"><span class="nav-number">4.</span> <span class="nav-text">链路层</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Chenxr</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Mist</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  
  
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      });
    </script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
      });
    </script>
    <script type="text/javascript" src="//cdn.bootcss.com/mathjax/2.7.1/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
  


  

  

</body>
</html>
